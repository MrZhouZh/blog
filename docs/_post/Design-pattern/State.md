---
title: 状态模式
date: 2024-03-04
category: Design-pattern
---

## 状态模式

在一个对象的内部状态变化时改变其行为, 使对象看起来好像改变了自身所属的类.

现实世界中:

手机的按键和开关会根据设备当前状态完成不同的行为:

- 当处于**解锁**状态时, 按下按钮将执行各种功能.

- 当处于**锁定**状态时, 按下任何按键都将解锁屏幕.

- 当处于**电量不足**时, 按下任何按钮都将显示充电界面.


### 优点

- **单一职责原则** 将与特定状态相关的代码放在独特的类中.

- **开闭原则** 无需修改已有状态和上下文就能引入新状态.

- 通过消除臃肿的状态机条件语句简化上下文代码.

### 缺点

- 如果状态机只有很少的几个状态, 或者很少发生改变, 那么该模式不适用

### 适用场景

- 如果对象需要根据自身状态进行不同行为, 同时状态的数量非常多与状态相关的代码会频繁变更时.

- 如果某个类需要根据成员变量的当前值改变自身行为, 从而需要使用大量的条件语句时.

- 当相似状态和基于条件的状态机转换中存在许多重复代码时

### 实现

::: details 点击查看代码

<<< @/docs/_code/TypeScript/State-pattern.ts

:::

